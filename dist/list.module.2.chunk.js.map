{"version":3,"sources":["./src/app/pages/investigation/list/list.component.html","./src/app/pages/investigation/list/list.component.scss","./src/app/pages/investigation/list/list.component.ts","./src/app/pages/investigation/list/list.module.ts"],"names":[],"mappings":"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","file":"list.module.2.chunk.js","sourcesContent":["module.exports = \"<div *ngIf=\\\"advSearch | async\\\" class=\\\"card card-outline-bluish unset-radius\\\">\\r\\n    <div class=\\\"card-header unset-radius\\\">\\r\\n        <app-card-actions-close></app-card-actions-close>\\r\\n        <h4 class=\\\"card-title m-b-0\\\">ค้นหา</h4>\\r\\n    </div>\\r\\n    <div class=\\\"card-body\\\">\\r\\n        <form class=\\\"form-horizontal\\\" #advForm=\\\"ngForm\\\" (ngSubmit)=\\\"onAdvSearch(advForm)\\\">\\r\\n            <div class=\\\"row\\\">\\r\\n                <label for=\\\"\\\" class=\\\"col-lg-2 col-sm-3\\\">เลขที่สืบสวน :</label>\\r\\n                <div class=\\\"col-lg-4 col-md-7 col-sm-9\\\">\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <input type=\\\"text\\\" id=\\\"\\\" name=\\\"InvestigateCode\\\" ngModel class=\\\"form-control form-control-sm\\\" placeholder=\\\"\\\">\\r\\n                    </div>\\r\\n                </div>\\r\\n                <label for=\\\"\\\" class=\\\"col-lg-2 col-sm-3\\\">คดีสืบสวนที่ :</label>\\r\\n                <div class=\\\"col-lg-4 col-md-7 col-sm-9\\\">\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <input type=\\\"text\\\" id=\\\"\\\" name=\\\"InvestigateNo\\\" ngModel class=\\\"form-control form-control-sm\\\" placeholder=\\\"\\\">\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"row\\\">\\r\\n                <label for=\\\"\\\" class=\\\"col-lg-2 col-sm-3\\\">หัวข้อการสืบสวน :</label>\\r\\n                <div class=\\\"col-lg-4 col-md-7 col-sm-9\\\">\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <input type=\\\"text\\\" id=\\\"\\\" name=\\\"Subject\\\" ngModel class=\\\"form-control form-control-sm\\\" placeholder=\\\"\\\">\\r\\n                    </div>\\r\\n                </div>\\r\\n\\r\\n                <label for=\\\"\\\" class=\\\"col-lg-2 col-sm-3\\\">วันที่เริ่มสืบสวน :</label>\\r\\n                <div class=\\\"col-lg-4 col-md-7 col-sm-9\\\">\\r\\n                    <div class=\\\"form-group input-group\\\">\\r\\n                        <input type=\\\"date\\\" id=\\\"\\\" name=\\\"DateStartFrom\\\" ngModel class=\\\"form-control form-control-sm\\\" placeholder=\\\"วว/ดด/ปปปป\\\">\\r\\n\\r\\n                        <label for=\\\"\\\">&nbsp; ถึง &nbsp;</label>\\r\\n\\r\\n                        <input type=\\\"date\\\" id=\\\"\\\" name=\\\"DateStartTo\\\" ngModel class=\\\"form-control form-control-sm\\\" placeholder=\\\"วว/ดด/ปปปป\\\">\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"row form-group\\\">\\r\\n                <div class=\\\"col-lg-10 col-8\\\"></div>\\r\\n                <div class=\\\"col-lg-2 col-4\\\">\\r\\n                    <button type=\\\"submit\\\" class=\\\"btn btn-block btn-themecolor\\\">ค้นข้อมูล</button>\\r\\n                </div>\\r\\n            </div>\\r\\n        </form>\\r\\n    </div>\\r\\n\\r\\n</div>\\r\\n\\r\\n<div class=\\\"card unset-radius\\\">\\r\\n    <div class=\\\"card-body p-0\\\">\\r\\n        <div class=\\\"table-responsive\\\">\\r\\n            <table #invesTable class=\\\"table table-sm table-striped\\\">\\r\\n                <thead>\\r\\n                    <tr>\\r\\n                        <th class=\\\"text-center\\\">ลำดับ</th>\\r\\n                        <th>เลขที่สืบสวน</th>\\r\\n                        <th>คดีสืบสวนที่</th>\\r\\n                        <th>หัวข้อการสืบสวน</th>\\r\\n                        <th>วันที่เริ่มสืบสวน</th>\\r\\n                        <th>วันที่สิ้นสุดสืบสวน</th>\\r\\n                        <th>ครั้งที่สืบสวนล่าสุด</th>\\r\\n                        <th></th>\\r\\n                    </tr>\\r\\n                </thead>\\r\\n                <tbody>\\r\\n                    <tr *ngFor=\\\"let item of invesList; let i=index;\\\">\\r\\n                        <td class=\\\"text-center\\\">{{i + 1}}</td>\\r\\n                        <td>{{item.InvestigateCode}}</td>\\r\\n                        <td>{{item.InvestigateNo}}</td>\\r\\n                        <td>{{item.Subject}}</td>\\r\\n                        <td>{{item.DateStart | date:'dd-MM-yyyy'}}</td>\\r\\n                        <td>{{item.DateEnd | date:'dd-MM-yyyy'}}</td>\\r\\n                        <td>{{item.InvestigateDetail?.length}}</td>\\r\\n                        <td class=\\\"text-center\\\">\\r\\n                            <a href=\\\"javaScript:void(0);\\\" class=\\\"text-secondary\\\" (click)=\\\"clickView(item.InvestigateCode)\\\">\\r\\n                                <i class=\\\"fa fa-eye fa-lg\\\"></i>\\r\\n                            </a>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                </tbody>\\r\\n            </table>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"card-footer card-footer-unset\\\">\\r\\n        <app-pagination-table \\r\\n            [TotalItems]=\\\"paginage.TotalItems\\\" \\r\\n            [CurrentPage]=\\\"paginage.CurrentPage\\\" \\r\\n            [PageSize]=\\\"paginage.PageSize\\\"\\r\\n            [RowsPerPageOptions]=\\\"paginage.RowsPerPageOptions\\\" \\r\\n            (onPageChange)=\\\"pageChanges($event)\\\">\\r\\n        </app-pagination-table>\\r\\n    </div>\\r\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/investigation/list/list.component.html\n// module id = ./src/app/pages/investigation/list/list.component.html\n// module chunks = list.module.2","module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/investigation/list/list.component.scss\n// module id = ./src/app/pages/investigation/list/list.component.scss\n// module chunks = list.module.2","import { Component, OnInit, OnDestroy, ViewChild, ElementRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { NavigationService } from '../../../shared/header-navigation/navigation.service';\r\nimport { InvestigateService } from '../investigate.service';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { Investigate } from '../investigate';\r\nimport { pagination } from '../../../config/pagination';\r\nimport { Message } from '../../../config/message';\r\nimport { SidebarService } from '../../../shared/sidebar/sidebar.component';\r\nimport { PreloaderService } from '../../../shared/preloader/preloader.component';\r\n@Component({\r\n    selector: 'app-list',\r\n    templateUrl: './list.component.html',\r\n    styleUrls: ['./list.component.scss']\r\n})\r\nexport class ListComponent implements OnInit, OnDestroy {\r\n\r\n    advSearch: any;\r\n    investigate = new Array<Investigate>();\r\n    invesList = new Array<Investigate>();\r\n    paginage = pagination;\r\n    private subOnSearch: any;\r\n    private subSetNextPage: any;\r\n\r\n    @ViewChild('invesTable') invesTable: ElementRef;\r\n\r\n    constructor(\r\n        private navService: NavigationService,\r\n        private invesService: InvestigateService,\r\n        private router: Router,\r\n        private sidebarService: SidebarService,\r\n        private preLoader: PreloaderService\r\n    ) {\r\n        // set false\r\n        this.navService.setEditButton(false);\r\n        this.navService.setDeleteButton(false);\r\n        this.navService.setPrintButton(false);\r\n        this.navService.setSaveButton(false);\r\n        this.navService.setCancelButton(false);\r\n        this.navService.setNextPageButton(false);\r\n        // set true\r\n        this.navService.setSearchBar(true);\r\n        this.navService.setNewButton(true);\r\n        this.advSearch = this.navService.showAdvSearch;\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.sidebarService.setVersion('1.02');\r\n        this.onSearch('');\r\n\r\n        this.subOnSearch = this.navService.searchByKeyword.subscribe(async Textsearch => {\r\n            if (Textsearch) {\r\n                await this.navService.setOnSearch('');\r\n                this.onSearch(Textsearch);\r\n            }\r\n        })\r\n\r\n        this.subSetNextPage = this.navService.onNextPage.subscribe(async status => {\r\n            if (status) {\r\n                await this.navService.setOnNextPage(false);\r\n                this.router.navigate([`/investigation/manage/C/NEW`]);\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.subOnSearch.unsubscribe();\r\n    }\r\n\r\n    onSearch(Textsearch: any) {\r\n        this.paginage.TotalItems = 0;\r\n        this.preLoader.setShowPreloader(true);\r\n        \r\n        // this.invesService.getByKeyword(Textsearch).subscribe(list => {\r\n        //     this.onSearchComplete(list);\r\n        //     this.preLoader.setShowPreloader(false);\r\n        // }, (err: HttpErrorResponse) => {\r\n        //     alert(err.message);\r\n        // });\r\n        \r\n    }\r\n\r\n    onAdvSearch(form: any) {\r\n\r\n        const sDateCompare = new Date(form.value.DateStartFrom);\r\n        const eDateCompare = new Date(form.value.DateStartTo);\r\n\r\n        if (sDateCompare.getTime() > eDateCompare.getTime()) {\r\n            alert(Message.checkDate);\r\n        } else {\r\n            form.value.DateStartFrom = sDateCompare.getTime();\r\n            form.value.DateStartTo = eDateCompare.getTime();\r\n            this.invesService.getByConAdv(form.value).subscribe(list => {\r\n\r\n                this.onSearchComplete(list)\r\n\r\n            }, (err: HttpErrorResponse) => {\r\n                alert(err.message);\r\n            });\r\n        }\r\n    }\r\n\r\n    onSearchComplete(list: any) {\r\n        this.investigate = [];\r\n\r\n        if (!list) {\r\n            alert(Message.noRecord);\r\n            return false;\r\n        }\r\n\r\n        if (Array.isArray(list)) {\r\n            this.investigate = list;\r\n        } else {\r\n            this.investigate.push(list);\r\n        }\r\n\r\n        if (!this.investigate.length) {\r\n            alert(Message.noRecord);\r\n        }\r\n        // set total record\r\n        this.paginage.TotalItems = this.investigate.length;\r\n    }\r\n\r\n    clickView(invesCode: string) {\r\n        this.router.navigate([`/investigation/manage/R/${invesCode}`]);\r\n    }\r\n\r\n    async pageChanges(event) {\r\n        this.invesList = await this.investigate.slice(event.startIndex - 1, event.endIndex);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/investigation/list/list.component.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ListComponent } from './list.component';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { CardActionsModule } from '../../component/card-actions/card-actions.module';\r\nimport { InvestigateService } from '../investigate.service';\r\nimport { HttpModule } from '@angular/http';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { PaginationTableModule } from '../../component/pagination-table/pagination-table.module';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    data: {\r\n      // title: 'ค้นหาข้อมูล',\r\n      urls: [{ title: 'หน้าหลัก', url: '/' }, { title: 'ค้นหาข้อมูลสืบสวน' }],\r\n      codePage: 'XCS60-01-01-00',\r\n      nextPage: { title: 'รายงานสืบสวน', url: '/investigation/manage' }\r\n    },\r\n    component: ListComponent\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    HttpModule,\r\n    HttpClientModule,\r\n    FormsModule,\r\n    RouterModule.forChild(routes),\r\n    CardActionsModule,\r\n    PaginationTableModule\r\n  ],\r\n  declarations: [ListComponent],\r\n  providers: [InvestigateService]\r\n})\r\nexport class ListModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/investigation/list/list.module.ts"],"sourceRoot":"webpack:///"}