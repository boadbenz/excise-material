<div class="row">
  <div class="col-md-12">

    <div class="table-responsive" *ngIf="(aggregate08$ | async)">
      <!-- {{ formGroup.value | json}} -->
      <!-- {{aggregate08$ | async | json}}

      {{SumBribeMoney}} -->
      <form [formGroup]="formGroup" *ngIf="formGroup" (change)="formChange(formGroup)" novalidate>
        <div class="text-right">
          <button (click)="addRow()" [attr.disabled]="(ILG60_08_04_00_00_E13_BUTTON$ | async)?.DISABLED ? 'disabled' : null"
            class="btn waves-effect waves-light btn-navy">เพิ่มจนท.สนับสนุน</button>
        </div>
        <table class="dataTable table table-sm table-striped table-hover">
          <thead>
            <tr>
              <th class="footable-sortable" colspan="1"></th>
              <th class="footable-sortable" colspan="1">ลำดับ</th>
              <th class="footable-sortable" colspan="1">ยศ</th>
              <th class="footable-sortable" colspan="1">ชื่อ-สกุล</th>
              <th class="footable-sortable" colspan="1">ตำแหน่ง</th>
              <th class="footable-sortable" colspan="1">ระดับ</th>
              <th class="footable-sortable" colspan="1">ได้ในฐานะ</th>
              <th class="footable-sortable text-center" colspan="2">จำนวนสัดส่วน</th>
              <th class="footable-sortable text-center" colspan="2">จำนวนเงิน</th>
              <th class="footable-sortable" colspan="1">รวมทั้งสิ้น</th>
              <th class="footable-sortable" colspan="1"></th>
            </tr>
            <tr>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th>ส่วนแรก</th>
              <th>ส่วนหลัง</th>
              <th>ส่วนแรก</th>
              <th>ส่วนหลัง</th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            
            <ng-container formArrayName="sharedBribeRewardForm">
              <tr class="footable" *ngFor="let item of sharedBribeRewardForm.controls | sortFormArray: 'sort'; let i=index;" [formGroupName]="i">
                <td>
                    <input type="checkbox" [id]="'td'+i" name="ischeck" formControlName="check" class="filled-in chk-col-indigo">
                    <label [for]="'td'+i" class="m-0"></label>
                  <!-- <mat-checkbox class="filled-in chk-col-indigo" formControlName="check"></mat-checkbox> -->
                </td>
                <td class="text-center">{{(i+1)}}</td>
                <td>
                  <input class="form-control" type="text" formControlName="TitleName" [ngbTypeahead]="searchTitleName">
                </td>
                <td>
                  <input class="form-control" type="text" formControlName="FullName" #FullName [ngbTypeahead]="searchFullName"
                    (keyup)="changeFullName(FullName.value, i)">
                </td>
                <td>
                  <input class="form-control" type="text" formControlName="PositionName">
                </td>
                <td>
                  <input class="form-control" type="text" formControlName="PosLevelName">
                </td>
                <td>
                  <input class="form-control" type="hidden" formControlName="ContributorName">
                  <select class="form-control" formControlName="ContributorID" #ContributorID (change)="onSelectContributor(ContributorID.value, i)">
                    <ng-container *ngFor="let itemCName of ContributorList">
                      <option *ngIf="itemCName.value < 4" [value]="itemCName.value">{{itemCName?.text}}</option>
                    </ng-container>
                  </select>
                </td>
                <td>
                  <input class="form-control" type="number" formControlName="FirstPart" #FirstPart (change)="onChangeFirstPart(sharedBribeRewardForm, i, FirstPart.value)" [attr.disabled]="'disabled'">
                </td>
                <td>
                  <input class="form-control" type="number" formControlName="SecondPart" #SecondPart (change)="onChangeSecondPart(sharedBribeRewardForm ,i)">
                </td>
                <td>
                  <input class="form-control" type="text" [value]="sharedBribeRewardForm.at(i).get('FirstMoney').value | currency:' '"
                    [attr.disabled]="'disabled'">
                </td>
                <td>
                  <input class="form-control" type="text" [value]="sharedBribeRewardForm.at(i).get('SecondMoney').value | currency:' '"
                    [attr.disabled]="'disabled'">
                </td>
                <td>
                  <input class="form-control" type="text" [value]="sharedBribeRewardForm.at(i).get('ToTalMoney').value | currency:' '"
                    [attr.disabled]="'disabled'">
                </td>
                <td><i class="ti-trash btn-action" (click)="deleteHandle(i)"></i></td>
              </tr>
            </ng-container>
          </tbody>
          <tfoot>
            <tr class="footable">
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td class="text-right">รวมทั้งสิ้น:</td>
              <td>
                <input class="form-control" type="text" [attr.disabled]="'disabled'" [value]="aggregate.FirstPart.sum">
              </td>
              <td>
                <input class="form-control" type="text" [attr.disabled]="'disabled'" [value]="aggregate.SecondPart.sum">
              </td>
              <td>
                <input class="form-control" type="text" [attr.disabled]="'disabled'" [value]="aggregate.FirstMoney.sum | currency:' '">
              </td>
              <td>
                <input class="form-control" type="text" [attr.disabled]="'disabled'" [value]="aggregate.SecondMoney.sum | currency:' '">
              </td>
              <td>
                <input class="form-control" type="text" [attr.disabled]="'disabled'" [value]="aggregate.ToTalMoney.sum | currency:' '">
              </td>
              <td></td>
            </tr>
          </tfoot>
        </table>
      </form>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="form-group row">
          <label class="col-form-label col-md-5 padding-adv-label">รวมเงินสินบนและรางวัล : </label>
          <div class="col-md-7">
            <input class="form-control" type="text" [value]="(SumMoney() || 0) | currency:' '" [attr.disabled]="'disabled'">
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="form-group row">
          <label class="col-form-label col-md-5 padding-adv-label">1 ใน 3 ส่วนแรกเป็นเงิน : </label>
          <div class="col-md-7">
            <input class="form-control" type="text" [value]="(SumFirstMoney() || 0) | currency:' '" [attr.disabled]="'disabled'">
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group row">
          <label class="col-form-label col-md-4">แบ่งเป็นส่วนๆละ : </label>
          <div class="col-md-3">
            <input class="form-control" type="text" [value]="(SumFirstMoneyPerPart() || 0) | currency:' '"
              [attr.disabled]="'disabled'">
          </div>
          <label class="col-form-label text-center col-md-2 padding-none">เหลือเศษ</label>
          <div class="col-md-3">
            <input class="form-control" type="text" [value]="(FirstRemainder() || 0) | currency:' '" [attr.disabled]="'disabled'">
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="form-group row">
          <label class="col-form-label col-md-5 padding-adv-label">2 ใน 3 ส่วนแรกเป็นเงิน : </label>
          <div class="col-md-7">
            <input class="form-control" type="text" [value]="(SumSecondMoney() || 0) | currency:' '" [attr.disabled]="'disabled'">
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group row">
          <label class="col-form-label col-md-4">แบ่งเป็นส่วนๆละ : </label>
          <div class="col-md-3">
            <input class="form-control" type="text" [value]="(SumSecondMoneyPerPart() || 0) | currency:' '"
              [attr.disabled]="'disabled'">
          </div>
          <label class="col-form-label text-center col-md-2 padding-none">เหลือเศษ</label>
          <div class="col-md-3">
            <input class="form-control" type="text" [value]="(SecondRemainder() || 0) | currency:' '" [attr.disabled]="'disabled'">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
